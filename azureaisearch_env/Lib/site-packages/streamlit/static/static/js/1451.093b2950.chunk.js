"use strict";(self.webpackChunk_streamlit_app=self.webpackChunk_streamlit_app||[]).push([[1451],{61451:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(22951),a=n(91976),i=n(67591),o=n(94337),s=n(66845),l=n(53608),d=n.n(l),u=n(25621),p=n(15791),m=n(28278),c=n(13553),f=n(87814),h=n(98478),g=n(86659),v=n(8879),y=n(68411),b=n(50641),C=n(40864),k="YYYY/MM/DD";function x(e){return e.map((function(e){return new Date(e)}))}var D=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).formClearHelper=new f.K,e.state={values:e.initialValue,isRange:e.props.element.isRange,isEmpty:!1},e.commitWidgetValue=function(t){var n;e.props.widgetMgr.setStringArrayValue(e.props.element,(n=e.state.values)?n.map((function(e){return d()(e).format(k)})):[],t)},e.onFormCleared=function(){var t=x(e.props.element.default);e.setState({values:t,isEmpty:!t},(function(){return e.commitWidgetValue({fromUi:!0})}))},e.handleChange=function(t){var n=t.date;if(null!==n&&void 0!==n){var r=[];Array.isArray(n)?n.forEach((function(e){e&&r.push(e)})):r.push(n),e.setState({values:r,isEmpty:!r},(function(){e.state.isEmpty||e.commitWidgetValue({fromUi:!0})}))}else e.setState({values:[],isEmpty:!0})},e.handleClose=function(){e.state.isEmpty&&e.setState((function(e,t){return{values:x(t.element.default),isEmpty:!x(t.element.default)}}),(function(){e.commitWidgetValue({fromUi:!0})}))},e.getMaxDate=function(){var t=e.props.element.max;return t&&t.length>0?d()(t,k).toDate():void 0},e}return(0,a.Z)(n,[{key:"initialValue",get:function(){var e=this.props.widgetMgr.getStringArrayValue(this.props.element);return x(void 0!==e?e:this.props.element.default||[])}},{key:"componentDidMount",value:function(){this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}},{key:"componentDidUpdate",value:function(){this.maybeUpdateFromProtobuf()}},{key:"componentWillUnmount",value:function(){this.formClearHelper.disconnect()}},{key:"maybeUpdateFromProtobuf",value:function(){this.props.element.setValue&&this.updateFromProtobuf()}},{key:"updateFromProtobuf",value:function(){var e=this,t=this.props.element.value;this.props.element.setValue=!1;var n=t.map((function(e){return new Date(e)}));this.setState({values:n,isEmpty:!n},(function(){e.commitWidgetValue({fromUi:!1})}))}},{key:"render",value:function(){var e,t=this.props,n=t.width,r=t.element,a=t.disabled,i=t.theme,o=t.widgetMgr,s=this.state,l=s.values,u=s.isRange,f=i.colors,x=i.fontSizes,D=i.lineHeights,W={width:n},F=d()(r.min,k).toDate(),I=this.getMaxDate(),V=0===r.default.length&&!a,w=r.format.replaceAll(/[a-zA-Z]/g,"9"),S=r.format.replaceAll("Y","y").replaceAll("D","d");return this.formClearHelper.manageFormClearListener(o,r.formId,this.onFormCleared),(0,C.jsxs)("div",{className:"stDateInput",style:W,"data-testid":"stDateInput",children:[(0,C.jsx)(h.O,{label:r.label,disabled:a,labelVisibility:(0,b.iF)(null===(e=r.labelVisibility)||void 0===e?void 0:e.value),children:r.help&&(0,C.jsx)(g.dT,{children:(0,C.jsx)(v.Z,{content:r.help,placement:y.u.TOP_RIGHT})})}),(0,C.jsx)(p.Z,{density:m.pw.high,formatString:S,mask:u?"".concat(w," \u2013 ").concat(w):w,placeholder:u?"".concat(r.format," \u2013 ").concat(r.format):r.format,disabled:a,onChange:this.handleChange,onClose:this.handleClose,overrides:{Popover:{props:{placement:c.r4.bottomLeft,overrides:{Body:{style:{border:"1px solid ".concat(f.fadedText10)}}}}},CalendarContainer:{style:{fontSize:x.sm,paddingRight:i.spacing.sm,paddingLeft:i.spacing.sm,paddingBottom:i.spacing.sm,paddingTop:i.spacing.sm}},Week:{style:{fontSize:x.sm}},Day:{style:function(e){var t=e.$pseudoHighlighted,n=e.$pseudoSelected,r=e.$selected,a=e.$isHovered;return{fontSize:x.sm,lineHeight:D.base,"::before":{backgroundColor:r||n||t||a?"".concat(f.secondaryBg," !important"):f.transparent},"::after":{borderColor:f.transparent}}}},PrevButton:{style:function(){return{display:"flex",alignItems:"center",justifyContent:"center",":active":{backgroundColor:f.transparent},":focus":{backgroundColor:f.transparent,outline:0}}}},NextButton:{style:{display:"flex",alignItems:"center",justifyContent:"center",":active":{backgroundColor:f.transparent},":focus":{backgroundColor:f.transparent,outline:0}}},Input:{props:{maskChar:null,overrides:{Root:{style:{borderLeftWidth:"1px",borderRightWidth:"1px",borderTopWidth:"1px",borderBottomWidth:"1px"}},ClearIcon:{props:{overrides:{Svg:{style:{color:i.colors.darkGray,transform:"scale(1.41)",width:i.spacing.twoXL,marginRight:"-8px",":hover":{fill:i.colors.bodyText}}}}}},Input:{style:{paddingRight:".5rem",paddingLeft:".5rem",paddingBottom:".5rem",paddingTop:".5rem",lineHeight:1.4},props:{"data-testid":"stDateInput-Input"}}}}}},value:l,minDate:F,maxDate:I,range:u,clearable:V})]})}}]),n}(s.PureComponent),W=(0,u.b)(D)},87814:function(e,t,n){n.d(t,{K:function(){return o}});var r=n(22951),a=n(91976),i=n(50641),o=function(){function e(){(0,r.Z)(this,e),this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}return(0,a.Z)(e,[{key:"manageFormClearListener",value:function(e,t,n){null!=this.formClearListener&&this.lastWidgetMgr===e&&this.lastFormId===t||(this.disconnect(),(0,i.bM)(t)&&(this.formClearListener=e.addFormClearedListener(t,n),this.lastWidgetMgr=e,this.lastFormId=t))}},{key:"disconnect",value:function(){var e;null===(e=this.formClearListener)||void 0===e||e.disconnect(),this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}}]),e}()}}]);